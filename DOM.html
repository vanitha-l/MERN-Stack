<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>DOM Tasks Combined</title>
<style>
  .product-card { padding: 10px; margin: 5px; }
  .highlight { background: yellow; }
  .dark-mode { background: #222; color: white; }
  .modal-overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.6);
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .modal {
    background: white;
    padding: 20px;
    border-radius: 5px;
  }
  .swatch {
    width: 40px;
    height: 40px;
    display: inline-block;
    cursor: pointer;
    margin: 5px;
  }
  #sortable li {
    padding: 5px;
    border: 1px solid #ccc;
    margin: 3px 0;
    cursor: grab;
  }
</style>
</head>
<body>

<h1 id="header-title">Old Title</h1>

<!-- Product Cards -->
<div class="product-card">Product 1</div>
<div class="product-card">Product 2</div>

<!-- Menu -->
<ul class="menu">
  <li>Home</li>
  <li>About</li>
</ul>

<!-- Controls -->
<div id="controls"></div>

<!-- Cart -->
<div id="cart"></div>

<!-- Avatar -->
<img class="avatar" src="https://via.placeholder.com/100" width="100" />

<!-- Article -->
<div class="article-body">
  <p>Paragraph 1</p>
  <p>Paragraph 2</p>
</div>

<button id="theme-toggle">Toggle Dark Mode</button>

<!-- Cards -->
<div class="card">
  Card 1 <button data-action="delete">Delete</button>
</div>

<hr>

<!-- Todo -->
<h3>Todo List</h3>
<input id="todo-input" />
<button id="add-btn">Add</button>
<ul id="todo-list"></ul>

<hr>

<!-- Users List -->
<ul id="users-list">
  <li data-user-id="101">John</li>
  <li data-user-id="102">Jane</li>
</ul>

<hr>

<!-- Counter -->
<h3>Counter</h3>
<span id="count">0</span>
<button id="plus">+1</button>
<button id="minus">-1</button>

<hr>

<!-- Search Filter -->
<h3>Search Countries</h3>
<input id="search" placeholder="Search country..." />
<ul>
  <li class="country">India</li>
  <li class="country">Canada</li>
  <li class="country">Germany</li>
</ul>

<hr>

<!-- Color Picker -->
<h3>Color Picker</h3>
<div class="swatch" data-color="#e74c3c" style="background:#e74c3c"></div>
<div class="swatch" data-color="#3498db" style="background:#3498db"></div>
<div class="swatch" data-color="#2ecc71" style="background:#2ecc71"></div>
<div class="swatch" data-color="#f1c40f" style="background:#f1c40f"></div>
<div class="swatch" data-color="#9b59b6" style="background:#9b59b6"></div>
<div class="swatch" data-color="#34495e" style="background:#34495e"></div>

<hr>

<!-- Sortable -->
<h3>Sortable List</h3>
<ul id="sortable">
  <li draggable="true">Item 1</li>
  <li draggable="true">Item 2</li>
  <li draggable="true">Item 3</li>
</ul>

<hr>

<!-- Modal -->
<button id="open-modal">Open Modal</button>

<script>
/* 1 */
document.getElementById("header-title").textContent = "My Awesome Page";

/* 2 */
document.querySelectorAll(".product-card").forEach(card => {
  card.style.border = "2px solid red";
});

/* 3 */
document.querySelectorAll("ul.menu li").forEach(li => {
  li.style.backgroundColor = "lightblue";
});

/* 4 */
const newBtn = document.createElement("button");
newBtn.textContent = "Click me!";
document.getElementById("controls").appendChild(newBtn);

/* 5 */
const item = document.createElement("div");
item.className = "item";
item.innerHTML = "<span>Apple</span> <button>Remove</button>";
document.getElementById("cart").appendChild(item);

/* 6 */
document.querySelector(".avatar").src =
  "https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d";

/* 7 */
document.querySelectorAll(".article-body > p").forEach(p => {
  p.classList.add("highlight");
});

/* 8 */
document.getElementById("theme-toggle").addEventListener("click", () => {
  document.body.classList.toggle("dark-mode");
});

/* 9 */
document.addEventListener("click", function (e) {
  if (e.target.matches('button[data-action="delete"]')) {
    e.target.closest(".card").remove();
  }
});

/* 10 Todo */
const input = document.getElementById("todo-input");
const addBtn = document.getElementById("add-btn");
const list = document.getElementById("todo-list");

addBtn.addEventListener("click", () => {
  if (!input.value.trim()) return;

  const li = document.createElement("li");
  li.textContent = input.value;

  const delBtn = document.createElement("button");
  delBtn.textContent = " Delete";
  delBtn.onclick = () => li.remove();

  li.appendChild(delBtn);
  list.appendChild(li);
  input.value = "";
});

/* 11 Event Delegation */
document.getElementById("users-list").addEventListener("click", function (e) {
  if (e.target.tagName === "LI") {
    console.log("Clicked user ID:", e.target.dataset.userId);
  }
});

/* 12 Counter */
let count = 0;
const countSpan = document.getElementById("count");

document.getElementById("plus").onclick = () => {
  count++;
  countSpan.textContent = count;
};

document.getElementById("minus").onclick = () => {
  if (count > 0) {
    count--;
    countSpan.textContent = count;
  }
};

/* 13 Live Search */
document.getElementById("search").addEventListener("input", function () {
  const value = this.value.toLowerCase();
  document.querySelectorAll(".country").forEach(li => {
    li.style.display = li.textContent.toLowerCase().includes(value)
      ? ""
      : "none";
  });
});

/* 14 Color Picker */
document.querySelectorAll(".swatch").forEach(swatch => {
  swatch.addEventListener("click", function () {
    document.body.style.backgroundColor = this.dataset.color;
  });
});

/* 15 Sortable */
const sortable = document.getElementById("sortable");
let dragged = null;

sortable.addEventListener("dragstart", e => dragged = e.target);
sortable.addEventListener("dragover", e => e.preventDefault());
sortable.addEventListener("drop", e => {
  e.preventDefault();
  if (e.target.tagName === "LI") {
    sortable.insertBefore(dragged, e.target);
  }
});

/* 16 Modal */
document.getElementById("open-modal").addEventListener("click", () => {
  const overlay = document.createElement("div");
  overlay.className = "modal-overlay";

  const modal = document.createElement("div");
  modal.className = "modal";
  modal.innerHTML = `
    <h2>Modal Title</h2>
    <p>This is a modal dialog.</p>
    <button id="close-modal">Close</button>
  `;

  overlay.appendChild(modal);
  document.body.appendChild(overlay);

  function close() { overlay.remove(); }

  document.getElementById("close-modal").onclick = close;
  overlay.addEventListener("click", e => {
    if (e.target === overlay) close();
  });
});
</script>

</body>
</html>
